---
# Preamble

## Author
author:
  name: Артём Дмитриевич Петлин
  degrees: Student
  orcid: 0000-0002-0877-7063
  email: 1132246846@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: "Отчёт по лабораторной работе №3"
license: "CC BY"
## Generic options
lang: ru-RU
number-sections: true
toc: true
toc-title: "Содержание"
toc-depth: 2
## Crossref customization
crossref:
  lof-title: "Список иллюстраций"
  lot-title: "Список таблиц"
  lol-title: "Листинги"
## Bibliography
bibliography:
  - bib/cite.bib
csl: _resources/csl/gost-r-7-0-5-2008-numeric.csl
## Formats
format:
### Pdf output format
  pdf:
    toc: true
    number-sections: true
    colorlinks: false
    toc-depth: 2
    lof: true # List of figures
    lot: true # List of tables
#### Document
    documentclass: scrreprt
    papersize: a4
    fontsize: 12pt
    linestretch: 1.5
#### Language
    babel-lang: russian
    babel-otherlangs: english
#### Biblatex
    cite-method: biblatex
    biblio-style: gost-numeric
    biblatexoptions:
      - backend=biber
      - langhook=extras
      - autolang=other*
#### Misc options
    csquotes: true
    indent: true
    header-includes: |
      \usepackage{indentfirst}
      \usepackage{float}
      \floatplacement{figure}{H}
      \usepackage[math,RM={Scale=0.94},SS={Scale=0.94},SScon={Scale=0.94},TT={Scale=MatchLowercase,FakeStretch=0.9},DefaultFeatures={Ligatures=Common}]{plex-otf}
### Docx output format
  docx:
    toc: true
    number-sections: true
    toc-depth: 2
---

# Цель работы

Получение навыков настройки базовых и специальных прав доступа для групп пользователей в операционной системе типа Linux.

# Задание

1. Прочитайте справочное описание man по командам chgrp, chmod, getfacl, setfacl.
2. Выполните действия по управлению базовыми разрешениями для групп пользователей (раздел 3.3.1).
3. Выполните действия по управлению специальными разрешениями для групп пользователей (раздел 3.3.2).
4. Выполните действия по управлению расширенными разрешениями с использованием
списков ACL для групп пользователей (раздел 3.3.3).

# Теоретическое введение
 
Требуется, используя специальные разрешения для групп пользователей, обеспечить
обмен файлами в общем для групп каталоге. При этом каталогу назначается бит идентификатора группы, а также sticky bit.
Sticky bit — дополнительный атрибут файлов или каталогов в ОС типа Linux, применяющийся в основном для каталогов с целью защиты содержимого каталогов от повреждения
или удаления пользователями, не являющимися их владельцами. Для установки этого
атрибута используется утилита chmod. Восьмеричное значение stiky-бита: 1000, а символьное: +t.

# Выполнение лабораторной работы

![data/main | third](image/1.png){#fig-001 width=100%}

Открываем терминал с учётной записью root. В корневом каталоге создаём каталоги и смотрим, кто является владельцем этих каталогов. В корневом каталоге создаём каталоги и смотрим, кто является владельцем этих каталогов. Устанавливаем разрешения, позволяющие владельцам каталогов записывать файлы в эти каталоги и запрещающие доступ к содержимому каталогов всем другим пользователям и группам, затем проверяем установленные права доступа.

![bob](image/2.png){#fig-002 width=100%}

В другом терминале переходим под учётную запись пользователя bob. Под пользователем bob пробуем перейти в каталог /data/main и создать файл в этом каталоге. Файл создается, так как пользователь bob находится в группе main. Под пользователем bob пробуем перейти в каталог /data/third и создать файл в этом каталоге. Перейти в каталог не вышло, так как bob не в группе third.

![alice](image/3.png){#fig-003 width=100%}

Открываем новый терминал под пользователем alice. Переходим в каталог /data/main и создаём два файла, владельцем которых является alice. 

![bob](image/4.png){#fig-004 width=100%}

В другом терминале переходим под учётную запись пользователя bob. Переходим в каталог /data/main и видим два файла, созданные пользователем alice. Пробуем удалить файлы, принадлежащие пользователю alice, и убеждаемся, что файлы будут удалены пользователем bob. Создаём два файла, которые принадлежат пользователю bob.

![sticky-бит](image/5.png){#fig-005 width=100%}

В терминале под пользователем root устанавливаем для каталога /data/main бит идентификатора группы, а также sticky-бит для разделяемого каталога группы.

![alice](image/6.png){#fig-006 width=100%}

В терминале под пользователем alice создаём в каталоге /data/main файлы и видим, что созданные файлы принадлежат группе, которая является группой-владельцем каталога.

![not permitted](image/7.png){#fig-007 width=100%}

В терминале под пользователем alice пробуем удалить файлы, принадлежащие пользователю bob, и убеждаемся, что sticky-bit предотвратит удаление этих файлов.

![setfacl](image/8.png){#fig-008 width=100%}

Открываем терминал с учётной записью root. Устанавливаем права на чтение и выполнение в каталоге /data/main для одной группы third и права на чтение и выполнение для другой группы main в соответствующем каталоге /data/third. Используем команду для просмотра прав, чтобы убедиться в правильности установки разрешений.

![newfile1](image/9.png){#fig-009 width=100%}

Создаём новый файл newfile1 в каталоге /data/main и используем проверку текущих назначений полномочий. Выполняем аналогичные действия для другого каталога /data/third. Файлы newfile1 имеют только базовые права, то есть без унаследования ACL.

![newfile2](image/10.png){#fig-010 width=100%}

Устанавливаем ACL по умолчанию для каталога /data/main. Добавляем ACL по умолчанию для каталога /data/third. Убеждаемся, что настройки ACL работают, добавив новый файл в каталог и проверив текущие назначения полномочий. Выполняем аналогичные действия для другого каталога.

![carol](image/11.png){#fig-011 width=100%}

Для проверки полномочий группы third в каталоге /data/main входим в другом терминале под учётной записью члена группы third. Проверяем операции с файлами и возможность осуществления записи в файл. Удалить newfile1 можно, так как нет защиты ACL, а дозаписать что-то в файл нельзя, так как нет права записи без унаследования прав ACL. 

# Выводы

Мы получили навыки настройки базовых и специальных прав доступа для групп пользователей в операционной системе типа Linux.

# Список литературы{.unnumbered}

::: {.refs}
1. Робачевский А., Немнюгин С., Стесик О. Операционная система UNIX. — 2-е изд. —
БХВ-Петербург, 2010.
2. Колисниченко Д. Н. Самоучитель системного администратора Linux. — СПб. : БХВ-
Петербург, 2011. — (Системный администратор).
3. Таненбаум Э., Бос Х. Современные операционные системы. — 4-е изд. — СПб. : Питер,
2015. — (Классика Computer Science).
4. Neil N. J. Learning CentOS: A Beginners Guide to Learning Linux. — CreateSpace Inde-
pendent Publishing Platform, 2016.
5. Unix и Linux: руководство системного администратора / Э. Немет, Г. Снайдер, Т.
Хейн, Б. Уэйли, Д. Макни. — 5-е изд. — СПб. : ООО «Диалектика», 2020.
:::
