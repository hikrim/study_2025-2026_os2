---
# Preamble

## Author
author:
  name: Артём Дмитриевич Петлин
  degrees: Student
  orcid: 0000-0002-0877-7063
  email: 1132246846@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: "Отчёт по лабораторной работе №2"
license: "CC BY"
## Generic options
lang: ru-RU
number-sections: true
toc: true
toc-title: "Содержание"
toc-depth: 2
## Crossref customization
crossref:
  lof-title: "Список иллюстраций"
  lot-title: "Список таблиц"
  lol-title: "Листинги"
## Bibliography
bibliography:
  - bib/cite.bib
csl: _resources/csl/gost-r-7-0-5-2008-numeric.csl
## Formats
format:
### Pdf output format
  pdf:
    toc: true
    number-sections: true
    colorlinks: false
    toc-depth: 2
    lof: true # List of figures
    lot: true # List of tables
#### Document
    documentclass: scrreprt
    papersize: a4
    fontsize: 12pt
    linestretch: 1.5
#### Language
    babel-lang: russian
    babel-otherlangs: english
#### Biblatex
    cite-method: biblatex
    biblio-style: gost-numeric
    biblatexoptions:
      - backend=biber
      - langhook=extras
      - autolang=other*
#### Misc options
    csquotes: true
    indent: true
    header-includes: |
      \usepackage{indentfirst}
      \usepackage{float}
      \floatplacement{figure}{H}
      \usepackage[math,RM={Scale=0.94},SS={Scale=0.94},SScon={Scale=0.94},TT={Scale=MatchLowercase,FakeStretch=0.9},DefaultFeatures={Ligatures=Common}]{plex-otf}
### Docx output format
  docx:
    toc: true
    number-sections: true
    toc-depth: 2
---

# Цель работы

Получить представление о работе с учётными записями пользователей и группами
пользователей в операционной системе типа Linux.

# Задание

1. Находясь под учётной записью пользователя alice, создайте группы main и third:
sudo groupadd main
sudo groupadd third
2. Используйте usermod для добавления пользователей alice и bob в группу main,
а carol, dan, dave и david — в группу third:
sudo usermod -aG main alice
sudo usermod -aG main bob
sudo usermod -aG third carol
3. Убедитесь, что пользователь carol правильно добавлен в группу third:
id carol
Пользователю carol должна быть назначена основная группа с идентификатором
gid = 100 (users). Определите, в какие вторичные группы входит carol.
4. Определите, участниками каких групп являются другие созданные вами пользователи.
Укажите эту информацию в отчёте.

# Теоретическое введение

В операционных системах типа Linux чаще всего применяется дискреционное управ-
ление доступом субъектов к объектам системы. В качестве субъектов системы чаще всего
выступают пользователи или группы пользователей, а в качестве объектов — файлы (в
том числе системные), каталоги, устройства и т.п. В качестве особого субъекта выделяется
суперпользователь (пользователь root), имеющий право устанавливать права владения
для всех остальных субъектов системы.
Под доступом к ресурсу системы понимают чтение (read), запись (write) и выполнение
(eXecute). Тот или иной тип доступа может быть применён к пользователю и/или группе,
владеющими тем или иным ресурсом операционной системы, а также ко всем остальным
субъектам, не являющимся владельцами ресурса.

# Выполнение лабораторной работы



![whoami](image/1.png){#fig-001 width=100%}

Входим в систему как обычные пользователи и открываем терминал.
Определяем, какую учётную запись мы используем, вводя команду `whoami`.
Выводим на экран более подробную информацию, используя команду `id`. Используем команду `su` для переключения к учётной записи `root`. При запросе пароля вводим пароль пользователя `root`. Набираем `id`.

![/etc/sudoers](image/2.png){#fig-002 width=100%}

Просматриваем в безопасном режиме файл `/etc/sudoers`, используя
`sudo -i visudo`. Используем visudo так как он не даст потерять весь механизм sudo, лишив всех пользователей возможности получать права суперпользователя (включая root).

![%wheel](image/3.png){#fig-003 width=100%}

Убеждаемся, что в открытом с помощью `visudo` файле присутствует строка
    `%wheel ALL=(ALL) ALL`
Все пользователи входящие в группу wheel, могут выполнять любые команды на этом компьютере, получая права любого пользователя, предварительно введя свой собственный пароль.

![alice](image/4.png){#fig-004 width=100%}

Создаём пользователя `alice`, входящего в группу `wheel`. Убеждаемся, что пользователь `alice` добавлен в группу `wheel`, введя `id alice`.

![alice passwd](image/5.png){#fig-005 width=100%}

Задаём пароль для пользователя `alice`.

![su alice](image/6.png){#fig-006 width=100%}

Переключаемся на учётную запись пользователя `alice`. Создаём пользователя `bob`

![bob passwd](image/7.png){#fig-007 width=100%}

Устанавливаем пароль для пользователя `bob`. Просматриваем, в какие группы входит пользователь `bob`.

![/etc/login.defs](image/8.png){#fig-008 width=100%}

Переключаемся в терминале на учётную запись пользователя `root`. Открываем файл конфигурации `/etc/login.defs` для редактирования, используя, например, `vim`. Изменяем несколько параметров. Например, находим параметр
    `CREATE_HOME`
    и убеждаемся, что он установлен в значение `yes`. Также устанавливаем параметр
    `USERGROUPS_ENAB no`.  

![/etc/skel](image/9.png){#fig-009 width=100%}

Также устанавливаем параметр
    `USERGROUPS_ENAB no`.  Переходим в каталог `/etc/skel`. Создаём каталоги `Pictures` и `Documents`, это позволяет добавить эти каталоги по умолчанию во все домашние каталоги пользователей.

![.bashrc](image/10.png){#fig-010 width=100%}

Изменяем содержимое файла `.bashrc`.

![carol](image/11.png){#fig-011 width=100%}

Переключаемся в терминале на учётную запись пользователя `alice`, Используя утилиту `useradd`, создаём пользователя `carol`, Устанавливаем пароль для пользователя `carol`. Смотрим информацию о пользователе `carol`, проверяем, в какую первоначальную группу входит пользователь `carol`; также убеждаемся, что каталоги `Pictures` и `Documents` были созданы в домашнем каталоге пользователя `carol`.

![passwd -n ...](image/12.png){#fig-012 width=100%}

Переключаемся в терминале на учётную запись пользователя `alice`. Сначала представлен зашифрованный пароль, потом параметры: срок действия пароля 99999 дней, за 7 дней до истечения срока пользователь получит предупреждение, пароль можно менять бесконечно подряд, то есть без какого-либо периода действия установленного пароля. Изменяем свойства пароля пользователя `carol` следующим образом. В этой записи срок действия пароля истекает через 90 дней (`-x 90`). За три дня до истечения срока действия пользователь получает предупреждение (`-w 3`). Пароль должен использоваться как минимум за 30 дней (`-n 30`) до того, как его можно будет изменить.
Убеждаемся в изменении в строке с данными о пароле пользователя `carol` в файле `/etc/shadow`.

![alice | carol](image/13.png){#fig-013 width=100%}

Убеждаемся, что идентификатор `alice` существует во всех трёх файлах и убеждаемся, что идентификатор `carol` существует не во всех трёх файлах.

![main | third](image/14.png){#fig-014 width=100%}

Находясь под учётной записью пользователя `alice`, создаём группы `main` и `third`. Используем `usermod` для добавления пользователей `alice` и `bob` в группу `main`, а `carol` — в группу `third`. Убеждаемся, что пользователь `carol` правильно добавлен в группу `third`. Определяем, участниками каких групп являются другие созданные нами пользователи. Указываем эту информацию в отчёте.

# Выводы

Мы получили представление о работе с учётными записями пользователей и группами
пользователей в операционной системе типа Linux.

# Список литературы{.unnumbered}

::: {.refs}
1. Робачевский А., Немнюгин С., Стесик О. Операционная система UNIX. — 2-е изд. —
БХВ-Петербург, 2010.
2. Колисниченко Д. Н. Самоучитель системного администратора Linux. — СПб. : БХВ-
Петербург, 2011. — (Системный администратор).
3. Таненбаум Э., Бос Х. Современные операционные системы. — 4-е изд. — СПб. : Питер,
2015. — (Классика Computer Science).
4. Neil N. J. Learning CentOS: A Beginners Guide to Learning Linux. — CreateSpace Inde-
pendent Publishing Platform, 2016.
5. Unix и Linux: руководство системного администратора / Э. Немет, Г. Снайдер, Т.
Хейн, Б. Уэйли, Д. Макни. — 5-е изд. — СПб. : ООО «Диалектика», 2020.
:::
